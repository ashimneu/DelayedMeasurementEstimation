\blue
Multi-constellation Global Navigation Satellite Systems (GNSS) is an example of a signal-rich environment.
Only four sufficiently diverse measurements are required for observability, yet many more measurements are available. 
For a receiver in a typical physical environment, outlier measurements may occur for various reasons, e.g., multi-path, non-line-of-sight signals, foliage. 
Herein, we consider differential GNSS, which can achieve sub-meter positioning accuracy, if the utilized measurements do not include outliers (see \cite{rahman2018ecef,rahmanphaseA, rahmanphaseB}). 

Let $\delta\rho_{G}$, $\delta\rho_{E}$ and $\delta\rho_{B}$ represent differentially corrected pseudorange measurements from the GPS, Galileo and BeiDou constellations.
The vector pseudorange measurement models are
\begin{eqnarray}
	\delta\Boldrho_{G} &=& \hat{\Boldrho}_G(\hat{\Boldx})+\1_G(\Boldp-\hat{\Boldp})  \nonumber \\ &&
	+ \1_{m_G} \,\bar{c} \, (t_r- \hat{t}_r) + \Boldeta_G,\label{Mgps}\\
	\delta\Boldrho_{E} &=& \hat{\Boldrho}_E(\hat{\Boldx})+\1_E(\Boldp-\hat{\Boldp})  \nonumber \\ &&
	+ \1_{m_E}\big( \bar{c} (t_r- \hat{t}_r) +(b_{E}-\hat{b}_{E})\big)+ \Boldeta_E,\label{Mgal}~~~~~~\\
	\delta\Boldrho_{B} &=& \hat{\Boldrho}_B(\hat{\Boldx})+\1_B(\Boldp-\hat{\Boldp})  \nonumber \\ &&
	+ \1_{m_B}\big( \bar{c} (t_r- \hat{t}_r) +(b_{B}-\hat{b}_{B})\big)+ \Boldeta_B,\label{Mbds}
\end{eqnarray}
where $\bar{c}$ is the speed of light; $t_r$ and $\hat{t}_r$ are the actual and prior receiver clock biases;
$\Boldp$ and $\hat{\Boldp}$ are the true and prior  rover position in ECEF frame;
$b_{E}$ and $\hat{b}_{E}$ are the Galileo inter-system clock bias and its prior;
$b_{B}$ and $\hat{b}_{B}$  are the BeiDou inter-system clock bias and its prior;
the column vectors $\1_{m_*}\in\mathbb{R}^{m_*}$ have a one in each entry;
and, $\eta_G$, $\eta_E$, $\eta_B$ represent pseudorange measurements errors.

The derivation of Eqn. (\ref{Mgps}) begins from Section II.B in \cite{aghapour2018outlier} using similar notation. 
Eqns. (\ref{Mgal}-\ref{Mbds}) are derived in the same manner accounting for the inter-system clock bias as described in \cite{dalla2015analysis}.

Given the prior state vector 
$\hat{\Boldx} = [\hat{\Boldp};\hat{t}_r;\hat{b}_{E};\hat{b}_{B}]$
and known satellite positions $\Boldp^s_G$, $\Boldp^s_E$ and $\Boldp^s_B$, the line-of-sight vectors 
\begin{equation}\label{eqn:ones}
\1_G = \frac{\hat{\Boldp}-\Boldp^s_G}{||\hat{\Boldp}-\Boldp^s_G||},\,
\1_E = \frac{\hat{\Boldp}-\Boldp^s_E}{||\hat{\Boldp}-\Boldp^s_E||},\,
\1_B = \frac{\hat{\Boldp}-\Boldp^s_B}{||\hat{\Boldp}-\Boldp^s_B||}.
\end{equation}
and the quantities
\begin{equation}\nonumber
	\begin{aligned}
		\hat{\rho}_G(\hat{\Boldx}) &= ||\hat{\Boldp}-\Boldp^s_G|| + R_{corr}(\Boldp^s_G,\hat{\Boldp})+ \bar{c}\hat{t}_r\\
		\hat{\rho}_E(\hat{\Boldx}) &= ||\hat{\Boldp}-\Boldp^s_E|| + R_{corr}(\Boldp^s_E,\hat{\Boldp})+ \bar{c} \hat{t}_r+\hat{b}_{E}\\
		\hat{\rho}_B(\hat{\Boldx}) &= ||\hat{\Boldp}-\Boldp^s_B|| + R_{corr}(\Boldp^s_B,\hat{\Boldp})+ \bar{c} \hat{t}_r+\hat{b}_{B}.
	\end{aligned}
\end{equation}
can be computed, where $R_{corr}(\Boldp^s,\Boldp)$ is the Sagnac/Earth-rotation correction (see \cite{HuFarrell2019}).

The measurement is computed as
$$\delta \Boldy =\begin{bmatrix}
\delta\rho_{G}-\hat{\rho}_G(\Boldx)\\
\delta\rho_{E}- \hat{\rho}_E(\Boldx)\\
\delta\rho_{B}-\hat{\rho}_B(\Boldx) \end{bmatrix}.$$
The linearized measurement model is
\begin{eqnarray}
	\delta \Boldy
	&=&  
	\begin{bmatrix}
		\BoldH_G & \1_{m_G} & 	0	&	0 \\ 
		\BoldH_E & \1_{m_E} & \1_{m_E} &  0 \\
		\BoldH_B & \1_{m_B} & 0		&  \1_{m_B}
	\end{bmatrix}\,
	\begin{bmatrix}
		\Boldp -\hat{\Boldp} \\ 
		\bar{c} (t_r- \hat{t}_r)\\ 
		(b_{E}-\hat{b}_{E}) \\ 
		(b_{B}-\hat{b}_{B})
		\end{bmatrix}	+\Boldeta \nonumber\\
	&=& 
	\BoldH\, \delta{\Boldx} + \Boldeta \label{eqn:GNSS model}
\end{eqnarray}
where $\BoldH_G$ has $m_G$ rows each  of the form $\1_G$, one for each available satellite.
The matrices $\BoldH_E$ and $\BoldH_B$ are defined similarly.
The total number of GNSS measurements $m=m_G+m_E+m_B$.
The prior is $\delta{\Boldx}\sim \mathcal{N}(\0,\BoldP_0)$.

\black 